2025-09-23 23:30:40,265 - phoenix.config - INFO - üìã Ensuring phoenix working directory: /home/kaustav/.phoenix
2025-09-23 23:30:40,273 - phoenix.inferences.inferences - INFO - Dataset: phoenix_inferences_c585e660-abbd-4ba8-9bf7-6539d9af3df4 initialized
2025-09-23 23:30:42,151 - __main__ - INFO - ‚úÖ Arize datasets client initialized successfully
2025-09-23 23:30:42,198 - __main__ - INFO - ‚úÖ Phoenix evaluators initialized successfully
2025-09-23 23:30:42,199 - __main__ - INFO -    ü§ñ Using evaluator model: gpt-4o
2025-09-23 23:30:42,199 - __main__ - INFO -    üìä Available evaluators: ['relevance', 'qa_correctness', 'hallucination', 'toxicity']
2025-09-23 23:30:42,199 - __main__ - INFO - üîß Setting up Phoenix observability...
2025-09-23 23:30:44,295 - alembic.runtime.migration - INFO - Context impl SQLiteImpl.
2025-09-23 23:30:44,295 - alembic.runtime.migration - INFO - Will assume transactional DDL.
2025-09-23 23:30:44,333 - alembic.runtime.migration - INFO - Running upgrade  -> cf03bd6bae1d, init
2025-09-23 23:30:44,905 - alembic.runtime.migration - INFO - Running upgrade cf03bd6bae1d -> 10460e46d750, datasets
2025-09-23 23:30:44,911 - alembic.runtime.migration - INFO - Running upgrade 10460e46d750 -> 3be8647b87d8, add token columns to spans table
2025-09-23 23:30:44,913 - alembic.runtime.migration - INFO - Running upgrade 3be8647b87d8 -> cd164e83824f, users and tokens
2025-09-23 23:30:44,918 - alembic.runtime.migration - INFO - Running upgrade cd164e83824f -> 4ded9e43755f, create project_session table
2025-09-23 23:30:44,924 - alembic.runtime.migration - INFO - Running upgrade 4ded9e43755f -> bc8fea3c2bc8, Add prompt tables
2025-09-23 23:30:44,928 - alembic.runtime.migration - INFO - Running upgrade bc8fea3c2bc8 -> 2f9d1a65945f, Annotation config migrations
/usr/lib/python3.12/contextlib.py:144: SAWarning: Skipped unsupported reflection of expression-based index ix_cumulative_llm_token_count_total
  next(self.gen)
/usr/lib/python3.12/contextlib.py:144: SAWarning: Skipped unsupported reflection of expression-based index ix_latency
  next(self.gen)
2025-09-23 23:30:44,984 - alembic.runtime.migration - INFO - Running upgrade 2f9d1a65945f -> bb8139330879, create project trace retention policies table
2025-09-23 23:30:44,989 - alembic.runtime.migration - INFO - Running upgrade bb8139330879 -> 8a3764fe7f1a, change jsonb to json for prompts
2025-09-23 23:30:44,996 - alembic.runtime.migration - INFO - Running upgrade 8a3764fe7f1a -> 6a88424799fe, Add auth_method column to users table and migrate existing authentication data.
2025-09-23 23:30:45,003 - alembic.runtime.migration - INFO - Running upgrade 6a88424799fe -> a20694b15f82, Cost-related tables
üåç To view the Phoenix app in your browser, visit http://localhost:6006/
üìñ For more information on how to use Phoenix, check out https://arize.com/docs/phoenix
2025-09-23 23:30:45,239 - __main__ - INFO - üåê Phoenix UI: http://localhost:6006/
üî≠ OpenTelemetry Tracing Details üî≠
|  Phoenix Project: flight-search-agent-evaluation
|  Span Processor: SimpleSpanProcessor
|  Collector Endpoint: http://localhost:6006/v1/traces
|  Transport: HTTP + protobuf
|  Transport Headers: {}
|  
|  Using a default SpanProcessor. `add_span_processor` will overwrite this default.
|  
|  ‚ö†Ô∏è WARNING: It is strongly advised to use a BatchSpanProcessor in production environments.
|  
|  `register` has set this TracerProvider as the global OpenTelemetry default.
|  To disable this behavior, call `register` with `set_global_tracer_provider=False`.

2025-09-23 23:30:45,243 - __main__ - INFO - ‚úÖ Phoenix setup completed successfully
2025-09-23 23:30:45,255 - __main__ - INFO - ‚úÖ LangChain instrumentation enabled
2025-09-23 23:30:45,257 - __main__ - INFO - ‚úÖ OpenAI instrumentation enabled
2025-09-23 23:30:47,764 - shared.couchbase_client - INFO - ‚úÖ Successfully connected to Couchbase
2025-09-23 23:30:49,466 - shared.couchbase_client - INFO - ‚úÖ Connected to existing bucket 'travel-sample'
2025-09-23 23:30:49,466 - shared.couchbase_client - INFO - üóëÔ∏è Clearing scope: travel-sample.agentc_bookings
2025-09-23 23:30:51,002 - shared.couchbase_client - INFO - üóëÔ∏è Clearing data from travel-sample.agentc_bookings.user_bookings_20250923...
2025-09-23 23:30:54,370 - shared.couchbase_client - INFO - ‚úÖ Cleared collection: travel-sample.agentc_bookings.user_bookings_20250923
2025-09-23 23:30:54,370 - shared.couchbase_client - INFO - ‚úÖ Completed clearing scope: travel-sample.agentc_bookings
2025-09-23 23:30:54,370 - main - INFO - ‚úÖ Cleared existing flight bookings for fresh test run: travel-sample.agentc_bookings
2025-09-23 23:30:54,398 - data.airline_reviews_data - INFO - Downloading Indian Airlines Customer Reviews dataset from Kaggle...
2025-09-23 23:30:55,005 - data.airline_reviews_data - INFO - Loading reviews from /home/kaustav/.cache/kagglehub/datasets/jagathratchakan/indian-airlines-customer-reviews/versions/1/Indian_Domestic_Airline.csv
2025-09-23 23:30:55,025 - data.airline_reviews_data - INFO - Loaded 2210 airline reviews from Kaggle dataset
2025-09-23 23:30:55,027 - data.airline_reviews_data - INFO - Processed 2210 airline reviews into text format
2025-09-23 23:30:56,421 - main - INFO - üìä Airline reviews collection: 2210 existing, 2210 expected
2025-09-23 23:30:56,421 - main - INFO - ‚úÖ Collection already has correct document count (2210), skipping clear
2025-09-23 23:30:56,423 - __main__ - INFO - üîß Setting up flight search agent...
2025-09-23 23:30:56,423 - shared.agent_setup - INFO - ‚úÖ Environment variables configured
2025-09-23 23:31:00,920 - shared.couchbase_client - INFO - ‚úÖ Successfully connected to Couchbase
2025-09-23 23:31:02,676 - shared.couchbase_client - INFO - ‚úÖ Connected to existing bucket 'travel-sample'
2025-09-23 23:31:05,337 - shared.couchbase_client - INFO - ‚ÑπÔ∏è Collection 'airline_reviews' exists, keeping existing data
2025-09-23 23:31:09,639 - shared.couchbase_client - INFO - ‚úÖ Primary index created successfully
2025-09-23 23:31:09,639 - shared.couchbase_client - INFO - ‚úÖ Collection setup complete: agentc_data.airline_reviews
2025-09-23 23:31:09,639 - main - INFO - Loaded vector search index definition from agentcatalog_index.json
2025-09-23 23:31:11,168 - shared.couchbase_client - INFO - ‚ÑπÔ∏è Vector search index 'airline_reviews_index' already exists
2025-09-23 23:31:11,169 - shared.agent_setup - INFO - üîß Setting up AI services for langgraph framework...
2025-09-23 23:31:11,300 - shared.agent_setup - INFO - ‚úÖ Using latest Capella AI embeddings (direct API key + OpenAI wrapper)
2025-09-23 23:31:12,780 - shared.agent_setup - INFO - ‚úÖ Using latest Capella AI LLM (direct API key + OpenAI wrapper)
2025-09-23 23:31:12,780 - shared.agent_setup - INFO - ‚úÖ AI services setup completed for langgraph
2025-09-23 23:31:12,780 - shared.couchbase_client - INFO - üîÑ Loading data into vector store...
2025-09-23 23:31:13,923 - data.airline_reviews_data - INFO - Found 2210 existing documents in collection, skipping data load
2025-09-23 23:31:13,924 - shared.couchbase_client - INFO - ‚úÖ Data loaded into vector store successfully
2025-09-23 23:31:17,833 - shared.couchbase_client - INFO - ‚úÖ LangChain vector store setup complete: travel-sample.agentc_data.airline_reviews
2025-09-23 23:31:17,833 - shared.agent_setup - INFO - üîß Setting up AI services for langgraph framework...
2025-09-23 23:31:17,860 - shared.agent_setup - INFO - ‚úÖ Using latest Capella AI embeddings (direct API key + OpenAI wrapper)
2025-09-23 23:31:19,338 - shared.agent_setup - INFO - ‚úÖ Using latest Capella AI LLM (direct API key + OpenAI wrapper)
2025-09-23 23:31:19,338 - shared.agent_setup - INFO - ‚úÖ AI services setup completed for langgraph
2025-09-23 23:31:42,599 - main - INFO - Agent Catalog integration successful
2025-09-23 23:31:42,600 - __main__ - INFO - ‚úÖ Flight search agent setup completed successfully
2025-09-23 23:31:42,600 - __main__ - INFO - üöÄ Starting evaluation with 5 queries
2025-09-23 23:31:42,600 - __main__ - INFO - üìã Evaluation Configuration:
2025-09-23 23:31:42,600 - __main__ - INFO -    ü§ñ Agent: Flight Search Agent (LangGraph)
2025-09-23 23:31:42,600 - __main__ - INFO -    üîß Phoenix Available: ‚úÖ
2025-09-23 23:31:42,600 - __main__ - INFO -    üìä Arize Datasets: ‚úÖ
2025-09-23 23:31:42,600 - __main__ - INFO -    üß† Phoenix Evaluators: ['relevance', 'qa_correctness', 'hallucination', 'toxicity']
2025-09-23 23:31:42,600 - __main__ - INFO - 
üìã Query 1/5
2025-09-23 23:31:42,600 - __main__ - INFO - üîç Evaluating query: Find flights from JFK to LAX
2025-09-23 23:31:42,601 - main - INFO - Flight Query: Find flights from JFK to LAX
2025-09-23 23:31:47,769 - main - INFO - üîçFULL Agent response: {'messages': [HumanMessage(content='Find flights from JFK to LAX', additional_kwargs={}, response_metadata={}, id='dbe01820-fa09-4cdd-82d1-51ea3110e706'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-f873a822d08e4e9e81160c3253537d88', 'function': {'arguments': '{"destination_airport": "LAX", "source_airport": "JFK"}', 'name': 'lookup_flight_info'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 24, 'prompt_tokens': 1330, 'total_tokens': 1354, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-ef37e6033599404fbeb796250052f2c6', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--9b314029-e523-491f-8a33-bb83badce2d4-0', tool_calls=[{'name': 'lookup_flight_info', 'args': {'destination_airport': 'LAX', 'source_airport': 'JFK'}, 'id': 'chatcmpl-tool-f873a822d08e4e9e81160c3253537d88', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1330, 'output_tokens': 24, 'total_tokens': 1354, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Available flights from JFK to LAX:\n\n1. AS flight from JFK to LAX using 321 762\n2. B6 flight from JFK to LAX using 320\n3. DL flight from JFK to LAX using 76W 752\n4. QF flight from JFK to LAX using 744\n5. AA flight from JFK to LAX using 32B 762\n6. UA flight from JFK to LAX using 757\n7. US flight from JFK to LAX using 32B 762\n8. VX flight from JFK to LAX using 320', name='lookup_flight_info', id='d0db86fe-8c90-4362-9ed1-f31baf1c915f', tool_call_id='chatcmpl-tool-f873a822d08e4e9e81160c3253537d88'), AIMessage(content='Would you like to book a flight, retrieve a booking, or search airline reviews?', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 17, 'prompt_tokens': 1500, 'total_tokens': 1517, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-fb9e98c184c24657a7d83aa2481fcf4f', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--9b4d80aa-3e23-49d3-bd47-586f3a36f92e-0', usage_metadata={'input_tokens': 1500, 'output_tokens': 17, 'total_tokens': 1517, 'input_token_details': {}, 'output_token_details': {}})]}
2025-09-23 23:31:47,769 - main - INFO - üìä Agent response: Would you like to book a flight, retrieve a booking, or search airline reviews?...
2025-09-23 23:31:47,780 - __main__ - INFO - ‚úÖ Query completed in 5.18s
2025-09-23 23:31:47,780 - __main__ - INFO - 
üìã Query 2/5
2025-09-23 23:31:47,780 - __main__ - INFO - üîç Evaluating query: Book a flight from LAX to JFK for tomorrow, 2 passengers, business class
2025-09-23 23:31:47,781 - main - INFO - Flight Query: Book a flight from LAX to JFK for tomorrow, 2 passengers, business class
2025-09-23 23:32:08,010 - search_airline_reviews - INFO - Searching for airline reviews with query: 'flight from LAX to JFK'
2025-09-23 23:32:10,678 - search_airline_reviews - INFO - Found 5 results for query: 'flight from LAX to JFK'
2025-09-23 23:32:12,996 - main - INFO - üîçFULL Agent response: {'messages': [HumanMessage(content='Book a flight from LAX to JFK for tomorrow, 2 passengers, business class', additional_kwargs={}, response_metadata={}, id='1b546a54-f178-4068-96e0-3b4add9f274e'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-48e806b339a4406989fc3de8309f17e3', 'function': {'arguments': '{"departure_date": "2025-09-24", "destination_airport": "JFK", "passengers": 2, "source_airport": "LAX"}', 'name': 'save_flight_booking'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 45, 'prompt_tokens': 1340, 'total_tokens': 1385, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-5ed7fb8e2b74431888a8e92266de1c12', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--69afddb9-e2b0-4bad-a3e2-f38ad859bf17-0', tool_calls=[{'name': 'save_flight_booking', 'args': {'departure_date': '2025-09-24', 'destination_airport': 'JFK', 'passengers': 2, 'source_airport': 'LAX'}, 'id': 'chatcmpl-tool-48e806b339a4406989fc3de8309f17e3', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1340, 'output_tokens': 45, 'total_tokens': 1385, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Flight Booking Confirmed!\n\nBooking ID: FL09240C0027CC\nRoute: LAX ‚Üí JFK\nDeparture Date: 2025-09-24\nPassengers: 2\nClass: economy\nTotal Price: $500.00\n\nNext Steps:\n1. Check-in opens 24 hours before departure\n2. Arrive at airport 2 hours early for domestic flights\n3. Bring valid government-issued photo ID\n\nThank you for choosing our airline!', name='save_flight_booking', id='d8d88c86-b7ab-4e83-aa47-999df46de6ea', tool_call_id='chatcmpl-tool-48e806b339a4406989fc3de8309f17e3'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-7dfaa734b4414698a0bb88d4e8948798', 'function': {'arguments': '{"destination_airport": "JFK", "source_airport": "LAX"}', 'name': 'lookup_flight_info'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 24, 'prompt_tokens': 1503, 'total_tokens': 1527, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-1726269026cc4f8fb23ab8fc04e382c1', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--6b4c627a-742f-4857-a34d-5bc2b76c0c50-0', tool_calls=[{'name': 'lookup_flight_info', 'args': {'destination_airport': 'JFK', 'source_airport': 'LAX'}, 'id': 'chatcmpl-tool-7dfaa734b4414698a0bb88d4e8948798', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1503, 'output_tokens': 24, 'total_tokens': 1527, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Available flights from LAX to JFK:\n\n1. AS flight from LAX to JFK using 321 762\n2. B6 flight from LAX to JFK using 320\n3. DL flight from LAX to JFK using 76W 752\n4. QF flight from LAX to JFK using 744\n5. UA flight from LAX to JFK using 757\n6. AA flight from LAX to JFK using 32B 762\n7. US flight from LAX to JFK using 32B 762\n8. VX flight from LAX to JFK using 320', name='lookup_flight_info', id='0c86c94c-97bd-4f44-9a4e-395d9fc2cf1e', tool_call_id='chatcmpl-tool-7dfaa734b4414698a0bb88d4e8948798'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-4d5c6a46e3d24340a7d062dc0d3d4103', 'function': {'arguments': '{"query": "flight from LAX to JFK"}', 'name': 'search_airline_reviews'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 19, 'prompt_tokens': 1673, 'total_tokens': 1692, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-fe3aab8d99c647dc9a484f5d09841a59', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--de0d8d28-8408-49ec-afc7-6908ee35db1a-0', tool_calls=[{'name': 'search_airline_reviews', 'args': {'query': 'flight from LAX to JFK'}, 'id': 'chatcmpl-tool-4d5c6a46e3d24340a7d062dc0d3d4103', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1673, 'output_tokens': 19, 'total_tokens': 1692, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Found 5 relevant airline reviews for \'flight from LAX to JFK\':\n\nReview 1:\nAirline: Vistara. Title: "Extremely poor experience2. Review: ‚úÖ Trip Verified |  Extremely poor experience, no information on flight delay. Poor ground process management and flight experience not up to the mark.. Rating: 2.0/10. Reviewer: A Kadyta. Date: 17th February 2024. Recommended: no\n\nReview 2:\nAirline: SpiceJet. Title: "Great travel experience". Review: ‚úÖ Trip Verified |  Marvelous courteous crew who took good care of all passengers. They should be rewarded for the patience shown towards the unruly ones. Great travel experience.. Rating: 10.0/10. Reviewer: Ranjita Pandey. Date: 18th April...\n\nReview 3:\nAirline: AirIndia. Title: "bad experience with any airline". Review: Not Verified |  Flight got delayed for 2 times. All the passengers who booked for this flight were very upset including me. There was no proper announcement when the gate was changed. I‚Äôve never seen this kind of bad experience wit...\n\nReview 4:\nAirline: Air India Express. Title: "no information provided". Review: Not Verified |  The flight delayed for 2 hrs and no information provided by airline. This will be my last trip with Air India Express, the worst airline. Rating: 1.0/10. Reviewer: Shameem Elachola. Date: 12th September 2024. Recom...\n\nReview 5:\nAirline: AirIndia. Title: "it was a horrible experience". Review: Not Verified |  I was flying from Tokyo Narita  to Dubai via Delhi. The checkin lady made a mistake in entering my information that they were not able to let me board even though I could have missed my flight, my bags were re checked ...', name='search_airline_reviews', id='81ead1b0-7100-451f-8e6f-550bfdf7e6b4', tool_call_id='chatcmpl-tool-4d5c6a46e3d24340a7d062dc0d3d4103'), AIMessage(content='Please let me know what else I can help you with.', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 2116, 'total_tokens': 2128, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-6743b25bf4614e61b2d828036aa63850', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--471830a6-b83d-4470-9f8c-fc1fe0a54d53-0', usage_metadata={'input_tokens': 2116, 'output_tokens': 12, 'total_tokens': 2128, 'input_token_details': {}, 'output_token_details': {}})]}
2025-09-23 23:32:12,996 - main - INFO - üìä Agent response: Please let me know what else I can help you with....
2025-09-23 23:32:13,004 - __main__ - INFO - ‚úÖ Query completed in 25.22s
2025-09-23 23:32:13,004 - __main__ - INFO - 
üìã Query 3/5
2025-09-23 23:32:13,004 - __main__ - INFO - üîç Evaluating query: Book an economy flight from JFK to MIA for next week, 1 passenger
2025-09-23 23:32:13,005 - main - INFO - Flight Query: Book an economy flight from JFK to MIA for next week, 1 passenger
2025-09-23 23:32:22,181 - main - INFO - üîçFULL Agent response: {'messages': [HumanMessage(content='Book an economy flight from JFK to MIA for next week, 1 passenger', additional_kwargs={}, response_metadata={}, id='ff816e19-db6c-42ad-95e0-885049902e7d'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-0d3576cfa2ef47ac81ab15a97b36e0ad', 'function': {'arguments': '{"departure_date": "2025-09-30", "destination_airport": "MIA", "source_airport": "JFK"}', 'name': 'save_flight_booking'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 38, 'prompt_tokens': 1339, 'total_tokens': 1377, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-3ac0545f6f884f00bf800b5e608b57fb', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--8d60189a-a9be-47a7-ba95-4ed5fb3ac061-0', tool_calls=[{'name': 'save_flight_booking', 'args': {'departure_date': '2025-09-30', 'destination_airport': 'MIA', 'source_airport': 'JFK'}, 'id': 'chatcmpl-tool-0d3576cfa2ef47ac81ab15a97b36e0ad', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1339, 'output_tokens': 38, 'total_tokens': 1377, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Flight Booking Confirmed!\n\nBooking ID: FL093084C5745B\nRoute: JFK ‚Üí MIA\nDeparture Date: 2025-09-30\nPassengers: 1\nClass: economy\nTotal Price: $250.00\n\nNext Steps:\n1. Check-in opens 24 hours before departure\n2. Arrive at airport 2 hours early for domestic flights\n3. Bring valid government-issued photo ID\n\nThank you for choosing our airline!', name='save_flight_booking', id='41ae05af-faf9-47e3-8e4b-8eee0ef04482', tool_call_id='chatcmpl-tool-0d3576cfa2ef47ac81ab15a97b36e0ad'), AIMessage(content='Question: {input} Thought:{agent_scratchpad}', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 12, 'prompt_tokens': 1495, 'total_tokens': 1507, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-ea8e8463fbb846ffb28273d83d99c995', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--9aac9c84-2c9b-4ac4-9b69-f7794af574d6-0', usage_metadata={'input_tokens': 1495, 'output_tokens': 12, 'total_tokens': 1507, 'input_token_details': {}, 'output_token_details': {}})]}
2025-09-23 23:32:22,181 - main - INFO - üìä Agent response: Question: {input} Thought:{agent_scratchpad}...
2025-09-23 23:32:22,189 - __main__ - INFO - ‚úÖ Query completed in 9.19s
2025-09-23 23:32:22,189 - __main__ - INFO - 
üìã Query 4/5
2025-09-23 23:32:22,189 - __main__ - INFO - üîç Evaluating query: Show me my current flight bookings
2025-09-23 23:32:22,190 - main - INFO - Flight Query: Show me my current flight bookings
2025-09-23 23:32:26,000 - main - INFO - üîçFULL Agent response: {'messages': [HumanMessage(content='Show me my current flight bookings', additional_kwargs={}, response_metadata={}, id='907a49bd-577d-475d-ae6c-b8adfab3ac49'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-9e26f4797b7a4e599ec6371595929eb6', 'function': {'arguments': '{"booking_query": ""}', 'name': 'retrieve_flight_bookings'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 13, 'prompt_tokens': 1329, 'total_tokens': 1342, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-fdd8e5e4fe884c20b868b5e66f6a2816', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--9bf71cdb-7af8-4305-8a83-3c97e4da2a8d-0', tool_calls=[{'name': 'retrieve_flight_bookings', 'args': {'booking_query': ''}, 'id': 'chatcmpl-tool-9e26f4797b7a4e599ec6371595929eb6', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1329, 'output_tokens': 13, 'total_tokens': 1342, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Your Current Bookings (2 found):\n\nBooking 1:\n  Booking ID: FL093084C5745B\n  Route: JFK ‚Üí MIA\n  Date: 2025-09-30\n  Passengers: 1\n  Class: economy\n  Total: $250.00\n  Status: confirmed\n  Booked: 2025-09-23\n\nBooking 2:\n  Booking ID: FL09240C0027CC\n  Route: LAX ‚Üí JFK\n  Date: 2025-09-24\n  Passengers: 2\n  Class: economy\n  Total: $500.00\n  Status: confirmed\n  Booked: 2025-09-23', name='retrieve_flight_bookings', id='e220d8ea-05a9-4044-8584-bc46c2e4d986', tool_call_id='chatcmpl-tool-9e26f4797b7a4e599ec6371595929eb6'), AIMessage(content='Would you like to search for flights, book a flight, or search for airline reviews?', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 18, 'prompt_tokens': 1514, 'total_tokens': 1532, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-c19ff5bc13934de0b1a3668f48258e89', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--3ba8b8e7-31c7-49c4-bd48-d702b09c6b3e-0', usage_metadata={'input_tokens': 1514, 'output_tokens': 18, 'total_tokens': 1532, 'input_token_details': {}, 'output_token_details': {}})]}
2025-09-23 23:32:26,000 - main - INFO - üìä Agent response: Would you like to search for flights, book a flight, or search for airline reviews?...
2025-09-23 23:32:26,011 - __main__ - INFO - ‚úÖ Query completed in 3.82s
2025-09-23 23:32:26,011 - __main__ - INFO - 
üìã Query 5/5
2025-09-23 23:32:26,011 - __main__ - INFO - üîç Evaluating query: What do passengers say about SpiceJet's service quality?
2025-09-23 23:32:26,012 - main - INFO - Flight Query: What do passengers say about SpiceJet's service quality?
2025-09-23 23:32:31,253 - search_airline_reviews - INFO - Searching for airline reviews with query: 'SpiceJet service quality'
2025-09-23 23:32:34,737 - search_airline_reviews - INFO - Found 5 results for query: 'SpiceJet service quality'
2025-09-23 23:32:37,680 - main - INFO - üîçFULL Agent response: {'messages': [HumanMessage(content="What do passengers say about SpiceJet's service quality?", additional_kwargs={}, response_metadata={}, id='9e0f1df8-8077-47ca-bab5-891219067a3f'), AIMessage(content='', additional_kwargs={'tool_calls': [{'id': 'chatcmpl-tool-6da1fe4a5e5a4d2f8b083ec7bb6e3a98', 'function': {'arguments': '{"query": "SpiceJet service quality"}', 'name': 'search_airline_reviews'}, 'type': 'function', 'index': 0}], 'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 1334, 'total_tokens': 1350, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-5fb6a10914bb486084ba43b01c7e80f1', 'service_tier': None, 'finish_reason': 'tool_calls', 'logprobs': None}, id='run--7321a7b6-dc06-4bc4-906e-295f0e6cc3a5-0', tool_calls=[{'name': 'search_airline_reviews', 'args': {'query': 'SpiceJet service quality'}, 'id': 'chatcmpl-tool-6da1fe4a5e5a4d2f8b083ec7bb6e3a98', 'type': 'tool_call'}], usage_metadata={'input_tokens': 1334, 'output_tokens': 16, 'total_tokens': 1350, 'input_token_details': {}, 'output_token_details': {}}), ToolMessage(content='Found 5 relevant airline reviews for \'SpiceJet service quality\':\n\nReview 1:\nAirline: SpiceJet. Title: "Great travel experience". Review: ‚úÖ Trip Verified |  Marvelous courteous crew who took good care of all passengers. They should be rewarded for the patience shown towards the unruly ones. Great travel experience.. Rating: 10.0/10. Reviewer: Ranjita Pandey. Date: 18th April...\n\nReview 2:\nAirline: SpiceJet. Title: "good service by the crew". Review: ‚úÖ Trip Verified | I have had good service by the crew. It was amazing, the crew was very enthusiastic and warm welcome. It was one of the best services in my experience.. Rating: 10.0/10. Reviewer: K Mansour. Date: 10th August 2024. Recom...\n\nReview 3:\nAirline: SpiceJet. Title: "Excellent service". Review: ‚úÖ Trip Verified |  Excellent service by the ground staff courteous beyond expectations always willing to help in the real sense and not lipservice i will recommend to all whom I know. Rating: 10.0/10. Reviewer: Ramanathan Ramchandra. Date: 1st N...\n\nReview 4:\nAirline: SpiceJet. Title: "excellent hospitality". Review: ‚úÖ Trip Verified |  It\'s very grateful to SpiceJet for the service in flight. Everything is fine with excellent hospitality. Very politely behavior and warmly welcome from your cabin crew and all members.. Rating: 10.0/10. Reviewer: A Kajan. ...\n\nReview 5:\nAirline: SpiceJet. Title: "delayed both ways by many hours". Review: Not Verified |  Flight was delayed both ways by many hours. Poor service for the same price as other airlines like IndiGo. No wifi or other amenities to compensate for terrible service.. Rating: 2.0/10. Reviewer: Somil Jain Jain. D...', name='search_airline_reviews', id='ee134edc-648b-4d61-ab4e-217ead104eea', tool_call_id='chatcmpl-tool-6da1fe4a5e5a4d2f8b083ec7bb6e3a98'), AIMessage(content='Would you like to book a flight from New York to Los Angeles on December 25, 2024, with 2 passengers in business class?', additional_kwargs={'refusal': None}, response_metadata={'token_usage': {'completion_tokens': 30, 'prompt_tokens': 1790, 'total_tokens': 1820, 'completion_tokens_details': None, 'prompt_tokens_details': None}, 'model_name': 'meta/llama-3.1-8b-instruct', 'system_fingerprint': None, 'id': 'chat-a0597c52115142fca75a39335b02b5eb', 'service_tier': None, 'finish_reason': 'stop', 'logprobs': None}, id='run--80d92e19-51ac-4d1f-ad4e-03dc944e5f30-0', usage_metadata={'input_tokens': 1790, 'output_tokens': 30, 'total_tokens': 1820, 'input_token_details': {}, 'output_token_details': {}})]}
2025-09-23 23:32:37,681 - main - INFO - üìä Agent response: Would you like to book a flight from New York to Los Angeles on December 25, 2024, with 2 passengers in business class?...
2025-09-23 23:32:37,694 - __main__ - INFO - ‚úÖ Query completed in 11.68s
2025-09-23 23:32:37,705 - __main__ - INFO - üß† Running Phoenix evaluations on 5 responses...
2025-09-23 23:32:37,705 - __main__ - INFO - üìã Evaluation criteria:
2025-09-23 23:32:37,705 - __main__ - INFO -    üîç Relevance: Does the response address the flight search query?
2025-09-23 23:32:37,705 - __main__ - INFO -    üéØ QA Correctness: Is the flight information accurate and helpful?
2025-09-23 23:32:37,705 - __main__ - INFO -    üö® Hallucination: Does the response contain fabricated information?
2025-09-23 23:32:37,706 - __main__ - INFO -    ‚ò†Ô∏è Toxicity: Is the response harmful or inappropriate?
2025-09-23 23:32:37,711 - __main__ - INFO -    üìä Running relevance evaluation...
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñå                                    | 4/5 (80.0%) | ‚è≥ 00:03<00:00 |  1.94it/s2025-09-23 23:32:42,268 - __main__ - INFO -    ‚úÖ relevance evaluation completed
2025-09-23 23:32:42,268 - __main__ - INFO -    üìä Running qa_correctness evaluation...
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:04<00:00 |  1.10it/s
llm_classify |                                                                                                                                                                                               | 0/5 (0.0%) | ‚è≥ 00:00<? | ?it/2025-09-23 23:32:48,813 - __main__ - INFO -    ‚úÖ qa_correctness evaluation completed‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:05<00:00 |  1.15s/it
2025-09-23 23:32:48,813 - __main__ - INFO -    üìä Running hallucination evaluation...
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:06<00:00 |  1.31s/it
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:05<00:00 |  1.09it/s2025-09-23 23:32:55,095 - __main__ - INFO -    ‚úÖ hallucination evaluation completed
2025-09-23 23:32:55,095 - __main__ - INFO -    üìä Running toxicity evaluation...
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:06<00:00 |  1.26s/it
llm_classify |                                                                                                                                                                                               | 0/5 (0.0%) | ‚è≥ 00:00<? | ?it/2025-09-23 23:33:02,974 - __main__ - INFO -    ‚úÖ toxicity evaluation completed‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:06<00:00 |  1.38s/it
2025-09-23 23:33:02,974 - __main__ - INFO - ‚úÖ Phoenix evaluations completed
2025-09-23 23:33:02,974 - __main__ - INFO - 
üìä Phoenix Evaluation Summary:
2025-09-23 23:33:02,975 - __main__ - INFO -   Total queries: 5
2025-09-23 23:33:02,975 - __main__ - INFO -   Successful executions: 5
2025-09-23 23:33:02,977 - __main__ - INFO -   Failed executions: 0
2025-09-23 23:33:02,977 - __main__ - INFO -   Average execution time: 11.02s
2025-09-23 23:33:02,977 - __main__ - INFO - 
üß† Phoenix Evaluation Results:
2025-09-23 23:33:02,980 - __main__ - INFO -    relevance: {'relevant': np.int64(5)}
2025-09-23 23:33:02,981 - __main__ - INFO -    qa_correctness: {'incorrect': np.int64(5)}
2025-09-23 23:33:02,981 - __main__ - INFO -    hallucination: {'factual': np.int64(5)}
2025-09-23 23:33:02,981 - __main__ - INFO -    toxicity: {'non-toxic': np.int64(5)}
2025-09-23 23:33:02,981 - __main__ - INFO - 
üìä Quick Scores Summary:
2025-09-23 23:33:02,982 - __main__ - INFO -    Query 1: ‚úÖ relevance: relevant | ‚ùå qa_correctness: incorrect | ‚úÖ hallucination: factual | ‚úÖ toxicity: non-toxic
2025-09-23 23:33:02,982 - __main__ - INFO -    Query 2: ‚úÖ relevance: relevant | ‚ùå qa_correctness: incorrect | ‚úÖ hallucination: factual | ‚úÖ toxicity: non-toxic
2025-09-23 23:33:02,982 - __main__ - INFO -    Query 3: ‚úÖ relevance: relevant | ‚ùå qa_correctness: incorrect | ‚úÖ hallucination: factual | ‚úÖ toxicity: non-toxic
2025-09-23 23:33:02,982 - __main__ - INFO -    Query 4: ‚úÖ relevance: relevant | ‚ùå qa_correctness: incorrect | ‚úÖ hallucination: factual | ‚úÖ toxicity: non-toxic
2025-09-23 23:33:02,983 - __main__ - INFO -    Query 5: ‚úÖ relevance: relevant | ‚ùå qa_correctness: incorrect | ‚úÖ hallucination: factual | ‚úÖ toxicity: non-toxic
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìù DETAILED EVALUATION RESULTS (FULL EXPLANATIONS):
2025-09-23 23:33:02,983 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,983 - __main__ - INFO - 
üîç QUERY 1: Find flights from JFK to LAX
2025-09-23 23:33:02,983 - __main__ - INFO - ------------------------------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä RELEVANCE: relevant
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The question asks for flights from JFK to LAX. The reference text provides a list of available flights from JFK to LAX, including the airline codes and aircraft types. This directly answers the question by providing the specific information requested about flights between these two airports.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä QA_CORRECTNESS: incorrect
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The agent did not provide the requested information about available flights from JFK to LAX. Instead, it asked the user if they wanted to book a flight, retrieve a booking, or search airline reviews, which does not address the user's request to find flights.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä HALLUCINATION: factual
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The agent's response does not provide any specific flight information, so it cannot be evaluated for factual accuracy against the reference text. Instead, it offers options for further actions, which is consistent with system capabilities. There is no clearly false information present.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä TOXICITY: non-toxic
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - 1. **Identify the Content**: The text provided is a simple request or command to find flights from JFK (John F. Kennedy International Airport) to LAX (Los Angeles International Airport).

2. **Analyze for Hateful Statements**: There are no words or phrases in the text that express hate towards any individual or group.

3. **Check for Demeaning or Disparaging Language**: The text does not contain any language that demeans or disparages another person or group. It is a straightforward travel-related query.

4. **Look for Inappropriate Language**: The text does not include any inappropriate or offensive language. It is neutral and professional.

5. **Assess for Threats of Violence**: There are no threats, either physical or emotional, present in the text. It is purely informational.

6. **Conclusion**: Based on the analysis, the text does not meet any criteria for toxicity. It is a non-toxic, neutral statement about finding flights.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,983 - __main__ - INFO - 
üîç QUERY 2: Book a flight from LAX to JFK for tomorrow, 2 passengers, business class
2025-09-23 23:33:02,983 - __main__ - INFO - ------------------------------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä RELEVANCE: relevant
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The question asks for booking a flight from LAX to JFK for tomorrow, for 2 passengers in business class. The reference text provides details of a confirmed flight booking with the same route (LAX to JFK), the same number of passengers (2), and the same class (business). However, the departure date in the reference text is 2025-08-06, which may not match 'tomorrow' depending on the current date. Despite this, the reference text contains relevant information about a flight booking that matches the other criteria of the question, such as the route, number of passengers, and class. Therefore, the reference text is relevant to the question as it provides information about a similar booking.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä QA_CORRECTNESS: incorrect
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The agent did not provide any information about the flight booking, such as confirmation, booking ID, route, departure date, passenger details, class, or price. The response was a generic prompt for further assistance, which does not fulfill the user's request for booking a flight.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä HALLUCINATION: factual
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - The agent's response does not contain any information that is clearly false. It simply asks if there is anything else it can help with, which is a plausible continuation after a booking confirmation. The lack of specific booking details in the response does not imply hallucination, as the task was to book a flight, not to confirm it in detail. The dynamic data differences are expected and not a sign of hallucination.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä TOXICITY: non-toxic
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,983 - __main__ - INFO - To determine whether the text is toxic, we need to analyze the content for any signs of hateful language, demeaning statements, inappropriate language, or threats of violence. The text provided is a straightforward request to book a flight from LAX to JFK for two passengers in business class. It does not contain any language that could be considered hateful or demeaning. There are no inappropriate words or phrases, nor are there any threats of physical or emotional violence. The text is purely transactional and lacks any elements that could be interpreted as toxic. Therefore, the text is non-toxic.
2025-09-23 23:33:02,983 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,983 - __main__ - INFO - 
üîç QUERY 3: Book an economy flight from JFK to MIA for next week, 1 passenger
2025-09-23 23:33:02,983 - __main__ - INFO - ------------------------------------------------------------
2025-09-23 23:33:02,983 - __main__ - INFO - 
üìä RELEVANCE: relevant
2025-09-23 23:33:02,983 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The question asks for booking an economy flight from JFK to MIA for next week for 1 passenger. The reference text provides details of a confirmed flight booking from JFK to MIA, specifying that it is for 1 passenger in economy class. Although the reference text does not specify the exact date of 'next week', it does confirm a flight booking that matches the route, class, and number of passengers requested in the question. Therefore, the reference text contains information relevant to the question.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä QA_CORRECTNESS: incorrect
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent's response is missing. Therefore, it cannot be evaluated for correctness. Without any information provided by the agent, it is impossible to determine if the user's request was fulfilled.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä HALLUCINATION: factual
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent's response is expected to contain dynamic data such as booking IDs, dates, and sequences, which will differ from the reference text. The response does not contain any impossible information or contradictions to system capabilities. The booking confirmation details are plausible and consistent with what is expected from a flight booking system.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä TOXICITY: non-toxic
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The text provided is a simple request to book a flight. It does not contain any language that is hateful, demeaning, or disparaging. There are no inappropriate words or phrases, nor is there any suggestion of physical or emotional violence. The text is straightforward and purely transactional, focusing on booking a flight from JFK to MIA. Therefore, it does not meet any criteria for being considered toxic.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,984 - __main__ - INFO - 
üîç QUERY 4: Show me my current flight bookings
2025-09-23 23:33:02,984 - __main__ - INFO - ------------------------------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä RELEVANCE: relevant
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The question asks for the user's current flight bookings. The reference text provides detailed information about two current flight bookings, including booking IDs, routes, dates, number of passengers, class, total cost, status, and booking date. This information directly answers the question by listing the current flight bookings the user has. Therefore, the reference text is relevant to the question.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä QA_CORRECTNESS: incorrect
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent did not provide the user's current flight bookings as requested. Instead, it asked if the user wanted to search for flights, book a flight, or search for airline reviews, which does not address the user's request.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä HALLUCINATION: factual
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent's response does not provide any information about the user's current flight bookings. Instead, it offers options to search for flights, book a flight, or search for airline reviews. This does not address the user's request to see their current bookings, but it does not contain any false information. The response is simply not relevant to the question asked.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä TOXICITY: non-toxic
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - To determine whether the text is toxic, we need to analyze the content based on the definition of toxicity provided. The text in question is: "Show me my current flight bookings".

1. **Hateful Statements**: The text does not contain any language that could be interpreted as hateful towards any individual or group.

2. **Demeaning or Disparaging Language**: There is no language in the text that demeans or disparages another user. It is a straightforward request for information about flight bookings.

3. **Inappropriate Language**: The text does not use any inappropriate or offensive language. It is polite and neutral.

4. **Threats of Physical or Emotional Violence**: There are no threats, either physical or emotional, present in the text. It is simply a request for information.

Given these points, the text does not meet any of the criteria for being considered toxic. It is a neutral and non-offensive request for information.

Therefore, the text is non-toxic.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,984 - __main__ - INFO - 
üîç QUERY 5: What do passengers say about SpiceJet's service quality?
2025-09-23 23:33:02,984 - __main__ - INFO - ------------------------------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä RELEVANCE: relevant
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The question asks about passengers' opinions on SpiceJet's service quality. The reference text provides five reviews from passengers about their experiences with SpiceJet's service. Each review highlights aspects of the service quality, such as being impeccable, good, outstanding, efficient, warm, and very good. These reviews directly address the question by providing specific feedback from passengers about the service quality of SpiceJet. Therefore, the reference text contains information that is relevant to answering the question.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä QA_CORRECTNESS: incorrect
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent did not provide any information about SpiceJet's service quality or reviews. Instead, it offered to book a flight, which is unrelated to the user's request. Therefore, the response is incorrect.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä HALLUCINATION: factual
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - The agent's response does not address the question about SpiceJet's service quality. Instead, it offers to book a flight from New York to Los Angeles, which is unrelated to the query about passenger reviews of SpiceJet. This indicates a misunderstanding or misalignment with the user's request, but it does not contain false information about SpiceJet's service. Therefore, the response is factual in terms of not containing hallucinated information, but it is irrelevant to the question asked.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,984 - __main__ - INFO - 
üìä TOXICITY: non-toxic
2025-09-23 23:33:02,984 - __main__ - INFO - üí≠ FULL REASONING:
2025-09-23 23:33:02,984 - __main__ - INFO - To determine whether the text is toxic, we need to analyze the content for any signs of hateful language, demeaning statements, inappropriate language, or threats of violence. The text in question is a simple inquiry about passengers' opinions on SpiceJet's service quality. It does not contain any language that could be considered hateful or demeaning. There are no inappropriate words or phrases, nor are there any threats of physical or emotional violence. The text is neutral and simply asks for feedback on a service, which is a common and non-toxic type of inquiry.
2025-09-23 23:33:02,984 - __main__ - INFO - ----------------------------------------
2025-09-23 23:33:02,985 - __main__ - INFO - ================================================================================
2025-09-23 23:33:02,985 - __main__ - INFO - üìä Creating Arize dataset...
llm_classify |‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà| 5/5 (100.0%) | ‚è≥ 00:07<00:00 |  1.58s/it
2025-09-23 23:33:03,785 - __main__ - INFO - ‚úÖ Arize dataset created successfully: RGF0YXNldDozMTY5MTg6SWtEOA==
2025-09-23 23:33:03,785 - __main__ - INFO - üìä Arize dataset created: RGF0YXNldDozMTY5MTg6SWtEOA==
2025-09-23 23:33:03,785 - __main__ - INFO - 
‚úÖ Phoenix evaluation complete!
2025-09-23 23:33:03,785 - __main__ - INFO - üîí Phoenix cleanup completed
(flight-search-agent-py3.12)  kaustav@Kaustav-OMEN-ubuntu ÓÇ∞ ~/Desktop/agent-catalog-quickstart/notebooks/flight_search_agent_langraph ÓÇ∞ ‚Ü± fix/tool-wrapping ÓÇ∞ 
