record_kind: semantic_search

name: search_flight_policies

description: >
  Search flight policies and travel information using semantic similarity 
  to help customers with booking rules, cancellations, and travel guidelines.

input:
  type: object
  properties:
    query:
      type: string
      description: "Natural language query about flight policies or travel rules"
  required: ["query"]

output:
  type: array
  items:
    type: object
    properties:
      content:
        type: string
        description: "Flight policy or travel information content"
      score:
        type: number
        description: "Semantic similarity score"

secrets:
  - couchbase:
      conn_string: CB_CONN_STRING
      username: CB_USERNAME
      password: CB_PASSWORD
      certificate: CB_CERTIFICATE
      
  - embedding_model:
      auth: OPENAI_API_KEY

vector_search:
  bucket: vector-search-testing
  scope: shared
  collection: agentcatalog
  index: vector_search_agentcatalog
  vector_field: embedding
  text_field: content
  
  embedding_model:
    name: text-embedding-3-small
    base_url: https://api.openai.com/v1/embeddings
    
  num_candidates: 5